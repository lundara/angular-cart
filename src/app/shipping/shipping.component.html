<!--
<script src="https://checkout.stripe.com/checkout.js"></script>-->

<script src="https://js.stripe.com/v3/"></script>
<script src="https://checkout.stripe.com/checkout.js"></script>
<app-navbar></app-navbar>

<div class="container pt-5">
  <div class="row">
    <div class="col-md-8">
      <form #f="ngForm">
        <div class="row">
          <div class="col-md-12">
              <h2>SHIPPING INFO</h2>
              <span *ngIf='test'>{{ test }}</span>
          </div>

          <div class="col-md-6">
            <div class="form-group">
              <label>First Name</label>
              <input [(ngModel)]="firstName" type="text" name="first_name" class="form-control" required pInputText>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label>Last Name</label>
              <input [(ngModel)]="lastName" name="last_name" type="text" class="form-control" required pInputText>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label>Email</label>
              <input [(ngModel)]="email" name="email" type="email" class="form-control" required pInputText>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label>Phone Number</label>
              <input [(ngModel)]="phone" name="phone" type="text" class="form-control" required pInputText>
            </div>
          </div>
          <div class="col-md-12">
            <div class="form-group">
              <label>Address</label>
              <textarea [(ngModel)]="address" name="address" class="form-control" rows="10" required></textarea>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label>City</label>
              <input  [(ngModel)]="city" name="city" type="text" class="form-control" required pInputText>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label>Zipcode</label>
              <input [(ngModel)]="zipcode" name="zipcode" type="text" class="form-control" required pInputText>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label>State</label>
              <input [(ngModel)]="state" name="state" type="text" class="form-control" required pInputText>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label>Country</label>
              <input [(ngModel)]="country" name="country" type="text" class="form-control" required pInputText>
            </div>
          </div>


        </div>
      </form>
    </div>
    <div class="col-md-4">

      <div class="col-md-12">
        <h2>ORDER PRODUCTS</h2>
        <table class="table">
          <tr *ngFor='let product of products'>
            <td>{{product.name}}</td>
            <td>{{product.qty}}x</td>
            <td>{{ (product.qty * product.price) | currency:'':'symbol-narrow' }}</td>
          </tr>
        </table>
        <table class="table table-bordered">
          <tr>
            <td width="50%">Total Price</td>
            <td width="50%" class="text-right">{{ gtotal | currency:'':'symbol-narrow' }}</td>
          </tr>
        </table>
      </div>

      <ngx-paypal [config]="payPalConfig" [ngClass]="{'disabled':f.invalid}"></ngx-paypal>

      <div class="col-md-12 text-center font-weight-bold">
        OR
      </div>

      <div class="col-md-12 pt-4">
        <form (submit)="handleForm($event)">
            <div #cardElement>
            </div>
            <div class="form-group">
              <input [(ngModel)]="nameOnCard" type="text" class="form-control" name="nameOnCard" placeholder="Name On Card" required>
            </div>
            <div class="form-group">
              <div #cardNumber></div>
            </div>
            <div class="form-group">
              <div #cvcNumber></div>
            </div>
            <div class="form-group">
              <div #expCard ></div>
            </div>
            <p>{{ cardErrors }}</p>
          <button class="btn btn-info btn-block" [disabled]="f.invalid">Buy</button>
        </form>
      </div>

    </div>
  </div>

</div>


